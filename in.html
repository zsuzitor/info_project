<html><head>
	<style type='text/css'>
	input,
	select,
	textarea {
		/*max-width: 280px;*/
		width:100%;
		height: 100%;
		box-sizing: border-box;
	}
	.link_standart_for_div {
		display: block; /* Ссылка как блочный элемент */
		text-align: center; /* Выравнивание по центру */
		height: 100%; /* Высота на весь слой */
		color: black; /* Цвет ссылки */
	}
	img {
		width: 100%;
		height: 100%;
	}

	li {
		list-style-type: none; /* Убираем маркеры */
	}

	ul {
		margin:0;
		margin-left: 0; /* Отступ слева в браузере IE и Opera */
		padding-left: 0; /* Отступ слева в браузере Firefox, Safari, Chrome */
	}

	.div_inline_block {
		display: inline-block;
		vertical-align: top;
	}
	body{
		/*margin: 0;*/
		position: relative;
	}
	/*---------------------------------------------------------------------------------------*/
	div.main_div{
		position: relative;
	}

	div.main_top_div{
		height: 100px;
		border: 1px solid black;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		z-index: 10;
	}
	div.main_block_left{
		width: 30%;
		border: 1px solid black;
		min-height: 500px;
		overflow: hidden;
		transition: 1s;
		position: absolute;
		overflow-x: auto;
	}
	div.main_block_right{
		width: 68%;
		min-height: 500px;
		border: 1px solid black;
		overflow: hidden;
		transition: 1s;
		position: absolute;
		overflow-x: auto;
	}
	div.div_for_block{
		margin-top: 100px;
		margin-left: 50px;
		position: relative;
		/*min-width: 600px;*/
	}
	div.div_left_column{
		width: 55px;

		position: fixed;
		top: 100px;
		left: 0;
		border: 1px solid black;
	}
	div.div_search{
		border: 1px solid black;
		width: 55px;
		height: 100%;
		transition: 1s;
		overflow: hidden;
		white-space: nowrap;
	}
/* div.div_search:hover{
	width: 300px;
	} */
	div.div_settings_block{
		width: 100px;
		top: 0;
		margin: auto;
		border: 1px solid black;
		height: 100%;
		position: absolute;
		transition: 1s;
	}
	div.div_search_img{
		width: 50px;
		height: 50px;
		border-radius: 50%;
		border: 1px solid black;
		position: relative;
		cursor: pointer;
	}

	div.div_search_input_block{
		height: 20px;
		width: 200px;

		left: 55px;
		top: 0;
	}
	div.div_for_top_menu{
		position: absolute;
		width: 100%;
		height: 50px;
		top: -60px;
		left: 100px;
		transition: 1s;
	}
	div.div_settings_left_b{
		height:0px;
		width:0px;
		border-left:40px solid black;
		border-bottom:20px solid transparent;
		border-top:20px solid transparent;
		cursor: pointer;
	}
	div.div_settings_right_b{
		height:0px;
		width:0px;
		border-right: 40px solid black;
		border-bottom:20px solid transparent;
		border-top:20px solid transparent;
		cursor: pointer;
	}
	div.div_settings_centre_b{
		width: 10px;
		background-color: black;
		height: 50px;
		cursor: e-resize;
	}
	div.div_settings_bottom_b{
		height:0px;
		width:0px;
		border-right: 20px solid transparent;
		border-left:20px solid transparent;
		border-top:40px solid black;
		margin: auto;
		cursor: pointer;
	}
	div.div_settings_top_b{
		height:0px;
		width:0px;
		border-right: 20px solid transparent;
		border-left:20px solid transparent;
		border-bottom:40px solid black;
		margin: auto;
		cursor: pointer;
	}
	div.top_menu_button{
		border-radius: 50%;
		border: 2px solid black;
		background-color: grey;
		width: 50px;
		height: 50px;
		font-size: 50pt;
		position: relative;
		cursor: pointer;
		color: white;
	}
	div.top_menu_button:hover{
		background-color: blue;
		color: black;
	}
	div.top_menu_add_section:before{
		content: '+';
		position: absolute;
		width: 1px;
		height: 1px;
		left: 6px;
		top: -12px;

	}
	div.top_menu_add_article:before{
		content: '+';
		position: absolute;
		width: 50px;
		height: 50px;
		left: 6px;
		top: -12px;
	}
	div.top_menu_dell_select:before{
		content: '-';
		position: absolute;
		width: 50px;
		height: 50px;
		left: 13px;
		top: -19px;
	}
	div.scroll_top_button{
		height: 50px;
		width: 50px;
		border: 2px solid black;
		font-size: 50pt;
		font-weight: 600;
		background-color: blue;
		color: white;
		overflow: hidden;
		position: relative;

	}
	div.scroll_top_button:hover{
		background-color: white;
		color: blue;
		cursor: pointer;
	}

	div.scroll_top_button:before{
		content: '^';
		position: absolute;
		left: 6px;
		top: 0px;
		width: 1px;
		height: 1px;
	}
	div.div_for_change_info{
		display: none;
	}
	div.div_for_base_info{
		display: none;
	}

div.div_one_section_name{
	border: 2px solid black;
	font-size: 20pt;
	color: red;
	cursor: pointer;
}

div.div_inside_articles{
background-color: #98FB98;
}
div.div_inside_sections{
background-color: #FFFFE0;
}




</style>
<script>

//TODO
/*
<!--TODO-->
<!--div_left_column высоту нормально задавать-->
<!--main_top_div ширину нормально-->
<!--для картинки можно попробовать из байтов ее строить-->
<!---->

<!--<button onclick="console.log('sdf')">11111111111111111111111</button>-->

когда смещаю влево блок с кнопками смещать правее блок menu или вообще его на постоянку переместить правее и смотреть что бы его не перекрывала кнопка поиска

//колонку слева высоту ей задавать js
//линия в блоке сверху сделать что бы ей можно было менять рамеры divов
слева человеческий список сделать
реальзация поиска
кнопка круглая будет именно кнопкой для поиска
добавить тени и css
//TODO прикрутить это что бы при клики правой и зажатой левой возвращалось назад и корды хранить в объекте 
+проверить добавить скролл по х для блоков
хранить последнеий нажатый блок
+проверить document.onmousemove   проверки на выход за границы
ширину divов левого и правого задавать из js а не css
при перемещении блока настроек переносить блок с поиском
добавить резервное копирование и спрашивать о том нужно ли сохранение(мб просто кнопку в меню сверху)
при удалении внешнего блока удалять все в нем но не его
передавать в шарпа в json строке всю инфу которая нужна
после каждого действия (сохранния удаления сохранять это действие в json и в html)
клик который открывает меню слева должен скрывать меню справа если меню слева уже открыто
+++++++
слева в строке кнопку для подъема наверх

*/




		//console.log(client_width);
		var client_width=0;
		var client_heigth=0;
		var x_centre=0;//относительно всего экрана(от левого края БРАУЗЕРА)
		var change_x_centre_object={};
		change_x_centre_object.click_change_x_centre=null;
	//change_x_centre_object.coords=null;

	document.addEventListener("DOMContentLoaded", page_first_start);

	document.onmouseup=function(e) {
		click_on_centre_settings(false);
	}
	document.onmousedown=function(e) {
		if(event.which == 3){
		//TODO прикрутить это что бы при клики правой и зажатой левой возвращалось назад и корды хранить в объекте 
		click_on_centre_settings(false);
	}

}

document.onmousemove = function(e) {
	if(change_x_centre_object.click_change_x_centre==true){
	//TODO проверки что бы за края не выходило
	var sett_block=document.getElementById("div_settings_block_id");
	var left_line_div=document.getElementById("div_left_column_id");
	var cord_mouse=event.clientX;
	var right_div=document.getElementById("main_block_right_id");
	if(cord_mouse<left_line_div.getBoundingClientRect().right){//(sett_block.getBoundingClientRect().left+sett_block.offsetWidth/2)
//sett_block.style.left=(left_line_div.offsetWidth+sett_block.offsetWidth/2)+"px";

cord_mouse=left_line_div.getBoundingClientRect().right;

}
else
// if(cord_mouse>right_div.getBoundingClientRect().right){//sett_block.getBoundingClientRect().right
// cord_mouse=right_div.getBoundingClientRect().right;
// }
if((cord_mouse+sett_block.offsetWidth/2)>client_width)
	cord_mouse=client_width-sett_block.offsetWidth/2;






	//var src_div=document.getElementById("div_search_id");
	//TODO переменная для проверок??
	var centre=cord_mouse;//-src_div.offsetWidth
//TODO после проверок
x_centre=centre;



var left_div=document.getElementById("main_block_left_id");


sett_block.style.left=(centre-sett_block.offsetWidth/2)+'px';//-sett_block.offsetWidth/2
if(sett_block.getBoundingClientRect().left<310){
	move_search_div(450);
}
else if(document.getElementById("div_search_id").getBoundingClientRect().right>50){
	move_search_div(0);
}



left_div.style.width=centre-left_line_div.offsetWidth-5+'px';
left_div.style.display='block';
right_div.style.left=centre-left_line_div.offsetWidth+5+'px';
right_div.style.width=client_width-centre-5+'px';

//console.log(centre);



//TODO прикрутить это что бы при клики правой и зажатой левой возвращалось назад и корды хранить в объекте 
// event.which == 1 – левая кнопка
// event.which == 2 – средняя кнопка
// event.which == 3 – правая кнопка
}
}
function up() {
	var top = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
	if (top > 0) {
		window.scrollBy(0, -100);
		time_for_page_up = setTimeout('up()', 20);
	} else clearTimeout(time_for_page_up);
	return false;
}


function page_first_start(){
	client_width=document.documentElement.clientWidth;
			//alert(client_width);
			client_heigth=document.documentElement.clientHeight;
			var left_div=document.getElementById("main_block_left_id");
			//var right_div=document.getElementById("main_block_right_id");
			var left_line_div=document.getElementById("div_left_column_id");
			var div_for_block=document.getElementById("div_for_block_id");
			div_for_block.style.width=((client_width-left_line_div.offsetWidth)+'px');
			x_centre=left_line_div.offsetWidth+left_div.offsetWidth;
			var setting_div=document.getElementById("div_settings_block_id");
			setting_div.style.left=x_centre-(setting_div.offsetWidth/2)+'px';//marginLeft
			//left_div.style.width = (client_width-left_line_divoffsetWidth)*0.3 +'px;'
			//right_div.style.width = (client_width-left_line_divoffsetWidth)*0.7 +'px;'
			left_line_div.style.height = client_heigth+'px'

			var right_div=document.getElementById("main_block_right_id");
			right_div.style.left=left_div.offsetWidth+5+'px';

			var left_top_button=document.getElementById("scroll_top_button_id");
			left_top_button.style.marginTop = client_heigth/2+'px';



//
function test__(id){
	var res="<div id='div_one_section_inside_"+id+"'><div class='div_inside_sections'>";

	var mass_with_id=[];
	for(var i=0;i<mass_section.length;++i){
		if(mass_section[i].Parrent_id==id)
			mass_with_id.push(mass_section[i].Id);
	}
	if(mass_with_id.length>0)
		
res+="<div  class='div_one_section_name'>"+ ((id)=>{
	for(var i=0;i<mass_section.length;++i)
if(mass_section[i].id==id)
return mass_section[i];
})(mass_with_id[i]).Head+"</div>";//TODO смотреть имя секции
for(var i=0;i<mass_with_id.length;++i){
	res+=test__(mass_with_id[i].Id);
}

res+="</div><div class='div_inside_articles'>";

for(var i=0;i<mass_article.length;++i){
	if(mass_article[i].Section_id==id){
		res+="<div>";
		res+="<div>"+mass_article[i].Head+"</div>";
		//res+="<div>"+mass_article[i].Body+"</div>";

		res+="</div>";
	}



}



res+="</div></div>";
return res;
}



			//-------------------------
			var mass_section=JSON.parse(document.getElementById("string_base_info_sections").value);
			var mass_article=JSON.parse(document.getElementById("string_base_info_articles").value);
			var str_res_for_left_ul=test__(1);
			left_div.innerHTML="<div class=''><div id='div_one_section_name_1' class='div_one_section_name' onclick='click_name_section(this)'>"+'ALL'+"</div>"+str_res_for_left_ul+"</div>";




		}


function click_name_section(a){
	var div=document.getElementById("div_one_section_inside_"+a.id.split('_')[4]);
	if(div.style.display==''||div.style.display=='block')
	div.style.display='none';
else
	div.style.display='block';
	
}

		function show_top_menu(){
			var top_menu=document.getElementById("div_for_top_menu_id");
			var top_setings=document.getElementById("div_settings_block_id");
			top_menu.style.top="0";
			top_setings.style.top="70px";
			var ch=document.getElementById("div_settings_bottom_b_ex");
			ch.innerHTML="<div class='div_settings_top_b' onclick='hidden_top_menu()'></div>";
		}


		function hidden_top_menu(){
			var top_menu=document.getElementById("div_for_top_menu_id");
			var top_setings=document.getElementById("div_settings_block_id");
			top_menu.style.top="-70px";
			top_setings.style.top="0";
			var ch=document.getElementById("div_settings_bottom_b_ex");
			ch.innerHTML="<div class='div_settings_bottom_b' onclick='show_top_menu()'></div>";

		}


		function show_left_menu(){
			var left_div=document.getElementById("main_block_left_id");
			var setting_div=document.getElementById("div_settings_block_id");
			var right_div=document.getElementById("main_block_right_id");
			var left_line_div=document.getElementById("div_left_column_id");
			right_div.style.width = '';
			left_div.style.display = 'block';
right_div.style.left =left_div.offsetWidth+5+'px';//left_line_div.offsetWidth
var top_setings=document.getElementById("div_settings_block_id");
top_setings.style.left=x_centre-(setting_div.offsetWidth/2)+'px';

move_search_div(0);

}


function hidden_left_menu(){
	var left_div=document.getElementById("main_block_left_id");

	var right_div=document.getElementById("main_block_right_id");
	var left_line_div=document.getElementById("div_left_column_id");
	right_div.style.width = (client_width-left_line_div.offsetWidth)+'px';
right_div.style.left =0;//left_line_div.offsetWidth
var top_setings=document.getElementById("div_settings_block_id");
top_setings.style.left=left_line_div.offsetWidth-(top_setings.offsetWidth/2)+'px';
left_div.style.display = 'none';
move_search_div(300);
}


function show_search_block(){
	var div=document.getElementById("div_search_id");
	div.style.width = '300px';
	
}


function hidden_search_block(){
	var div=document.getElementById("div_search_id");
	div.style.width = '55px';
}

function start_search(){


}
function click_on_centre_settings(flag){
	change_x_centre_object.click_change_x_centre=flag;
	var sett_block=document.getElementById("div_settings_block_id");
	var left_div=document.getElementById("main_block_left_id");
	var right_div=document.getElementById("main_block_right_id");
	if(flag==true){
		sett_block.style.transition='0s';
		left_div.style.transition='0s';
		right_div.style.transition='0s';
	}
	else{
		sett_block.style.transition='1s';
		left_div.style.transition='1s';
		right_div.style.transition='1s';
	}

}


function add_section(){
//div_for_adds_info_id
}

function add_article(){

}

function dell_select(){

}
// function click_up_on_centre_settings(){

// }
function move_search_div(marginleft){
	var search_div=document.getElementById("div_search_id");
	search_div.style.marginLeft = marginleft+'px';
}
</script>
</head><body>
	<div class="div_for_change_info" id="div_for_change_info_id"></div>
	<div class="div_for_base_info" id="div_for_base_info_id">
		<div id="one_section_base_id_1"></div>
		<div id="one_section_base_id_2"></div>
		<div id="one_section_base_id_3"></div>
		<input type="hidden" id="string_base_info_sections" value='[
		{
			"Id": 1,
			"Parrent_id": 0,
			"Head": "id1"
		},
		{
			"Id": 2,
			"Parrent_id": 1,
			"Head": "id2"
		},
		{
			"Id": 3,
			"Parrent_id": 1,
			"Head": "id3"
		},
		{
			"Id": 4,
			"Parrent_id": 1,
			"Head": "id4"
		},
		{
			"Id": 5,
			"Parrent_id": 2,
			"Head": "id5"
		},
		{
			"Id": 6,
			"Parrent_id": 3,
			"Head": "id6"
		},
		{
			"Id": 7,
			"Parrent_id": 6,
			"Head": "id7"
		}
		]'>

		<input type="hidden" id="string_base_info_articles" value='[
		{
			"Id": 1,
			"Section_id": 1,
			"Head": "head1",
			"Body": "body1"
		},
		{
			"Id": 2,
			"Section_id": 7,
			"Head": "head2",
			"Body": "body2"
		},
		{
			"Id": 3,
			"Section_id": 6,
			"Head": "head3",
			"Body": "body3"
		},
		{
			"Id": 4,
			"Section_id": 5,
			"Head": "head4",
			"Body": "body4"
		}
		]'>


	</div>
	<div class="main_div">
		<div class="main_top_div">
			<div class="div_for_top_menu" id="div_for_top_menu_id">
				<div class="div_inline_block top_menu_button top_menu_add_section" onclick='add_section()'></div>
				<div class="div_inline_block top_menu_button top_menu_add_article" onclick='add_article()'></div>
				<div class="div_inline_block top_menu_button top_menu_dell_select" onclick='dell_select()'></div>
			</div>
			<div class="div_inline_block div_search" id="div_search_id" onmouseout='hidden_search_block()' onmouseover='show_search_block()'>
				<div class="div_search_img div_inline_block" onclick="start_search()"></div>
				<div class="div_inline_block div_search_input_block"> <input type="text"></div>
			</div>
			<div class="div_inline_block div_settings_block" id="div_settings_block_id">
				<div>
					<div class="div_inline_block"><div class="div_settings_left_b" onclick="show_left_menu()"></div></div>
					<div  class="div_inline_block"><div class="div_settings_centre_b" onmouseup="click_on_centre_settings(false)" onmousedown="click_on_centre_settings(true)"></div></div>
					<div class="div_inline_block"><div class="div_settings_right_b" onclick="hidden_left_menu()"></div></div>
				</div>
				<div id="div_settings_bottom_b_ex"><div class="div_settings_bottom_b" onclick="show_top_menu()"></div></div>
			</div>
		</div>
		<div class="div_left_column" id="div_left_column_id"><div class="scroll_top_button" id="scroll_top_button_id" onclick="up()"></div></div>
		<div class="div_inline_block div_for_block" id="div_for_block_id"><div class="div_inline_block main_block_left" id="main_block_left_id"></div>
		<div class="div_inline_block  main_block_right" id="main_block_right_id"></div></div>
	</div>








</body></html>

